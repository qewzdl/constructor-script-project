{{ define "components/profile-account-card" }}
<section class="profile-card" aria-labelledby="profile-details-title">
    <header class="profile-card__header">
        <h2 id="profile-details-title" class="profile-card__title">
            Account details
        </h2>
        <p class="profile-card__description">
            The information below appears in comments and author bylines.
        </p>
    </header>

    <div
        class="profile__alert"
        id="profile-details-alert"
        role="alert"
        hidden
    ></div>

    <form
        id="profile-form"
        class="profile-form"
        method="post"
        data-action="{{ .ProfileAction }}"
        novalidate
    >
        <div class="profile-avatar" data-profile-avatar>
            <button
                type="button"
                class="profile-avatar__preview"
                data-avatar-preview
                data-avatar-trigger
                aria-label="Change avatar"
            >
                {{ if and .CurrentUser (ne .CurrentUser.Avatar "") }}
                <img
                    src="{{ .CurrentUser.Avatar }}"
                    alt="Profile avatar"
                    class="profile-avatar__image"
                    loading="lazy"
                    data-avatar-image
                />
                {{ end }}
            </button>
            <div class="profile-avatar__controls">
                <div class="profile-avatar__buttons">
                    <button
                        type="button"
                        class="button button--ghost profile-avatar__remove"
                        data-avatar-remove
                        aria-label="Remove avatar"
                    >
                        Remove avatar
                    </button>
                </div>
                <p class="profile-avatar__hint">
                    Use JPG, PNG, or WEBP up to 10MB.
                </p>
                <input
                    type="file"
                    id="profile-avatar-input"
                    name="avatar"
                    accept="image/*"
                    data-avatar-input
                    hidden
                />
                <input
                    type="hidden"
                    id="profile-avatar-url"
                    name="avatar_url"
                    value="{{ if .CurrentUser }}{{ .CurrentUser.Avatar }}{{ end }}"
                    data-avatar-url
                />
            </div>
        </div>
        <div class="form-grid">
            <div class="form-field">
                <label class="form-field__label" for="profile-username"
                    >Username</label
                >
                <input
                    id="profile-username"
                    name="username"
                    type="text"
                    class="form-field__input"
                    placeholder="Display name"
                    autocomplete="username"
                    value="{{ if .CurrentUser }}{{ .CurrentUser.Username }}{{ end }}"
                    required
                />
            </div>
            <div class="form-field">
                <label class="form-field__label" for="profile-email"
                    >Email</label
                >
                <input
                    id="profile-email"
                    name="email"
                    type="email"
                    class="form-field__input"
                    placeholder="name@example.com"
                    autocomplete="email"
                    value="{{ if .CurrentUser }}{{ .CurrentUser.Email }}{{ end }}"
                    required
                />
            </div>
        </div>

        <div class="form-field">
            <label class="form-field__label" for="profile-role">Role</label>
            <input
                id="profile-role"
                name="role"
                type="text"
                class="form-field__input"
                value="{{ if .CurrentUser }}{{ .CurrentUser.Role }}{{ else }}user{{ end }}"
                readonly
                aria-readonly="true"
            />
        </div>

        <button type="submit" class="button button--primary">
            Save changes
        </button>
    </form>
</section>
{{ end }}
