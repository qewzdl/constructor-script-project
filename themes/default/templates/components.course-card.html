{{ define "components/course-card__interactive-attrs" }}
    {{- $card := . }}
    {{- if $card.Interactive }}
        data-course-card
        {{- if $card.HasCourseID }} data-course-id="{{ $card.CourseID }}"{{- end }}
        role="button"
        tabindex="0"
        aria-haspopup="dialog"
    {{- else if $card.HasCourseID }}
        data-course-id="{{ $card.CourseID }}"
    {{- end }}
    {{- if $card.HeadingID }} aria-labelledby="{{ $card.HeadingID }}"{{- end }}
    {{- if $card.DescriptionID }} aria-describedby="{{ $card.DescriptionID }}"{{- end }}
{{ end }}

{{ define "components/course-card" }}
    {{- $card := . }}
    {{- $element := default "article" $card.Element }}
    {{- $isLink := and (eq $element "a") $card.Href }}
    {{- if $isLink }}
    <a
        class="{{ $card.CardClass }}"
        href="{{ $card.Href }}"
        {{- template "components/course-card__interactive-attrs" $card }}
    >
    {{- else }}
    <article
        class="{{ $card.CardClass }}"
        {{- template "components/course-card__interactive-attrs" $card }}
    >
    {{- end }}
        {{- if $card.Image }}
        <figure class="{{ $card.MediaClass }}">
            <img
                class="{{ $card.ImageClass }}"
                src="{{ asset $card.Image.URL }}"
                alt="{{ $card.Image.Alt }}"
                loading="lazy"
            />
        </figure>
        {{- end }}

        <div class="{{ $card.ContentClass }}">
            <h3 id="{{ $card.HeadingID }}" class="{{ $card.TitleClass }}">
                {{- if $card.LinkClass }}
                <span class="{{ $card.LinkClass }}">{{ $card.Title }}</span>
                {{- else }}
                {{ $card.Title }}
                {{- end }}
            </h3>

            {{- if or $card.PriceBlock $card.MetaItems }}
            <div class="{{ $card.MetaClass }}" aria-label="Course summary">
                {{- if $card.PriceBlock }}
                <div class="courses-list__price-block">
                    {{- if $card.PriceBlock.Current }}
                    <span class="{{ default "courses-list__price courses-list__price--current" $card.PriceBlock.CurrentClass }}">
                        {{ $card.PriceBlock.Current }}
                    </span>
                    {{- end }}
                    {{- if $card.PriceBlock.Original }}
                    <span class="{{ default "courses-list__price courses-list__price--original" $card.PriceBlock.OriginalClass }}">
                        {{ $card.PriceBlock.Original }}
                    </span>
                    {{- end }}
                </div>
                {{- end }}
                {{- range $card.MetaItems }}
                <span class="{{ .Class }}">
                    {{- if .Label -}}
                        {{ .Label }}
                    {{- end -}}
                    {{- if .Time -}}
                        {{- if .Label }} {{ end -}}
                        <time datetime="{{ .Time.DateTime }}">{{ .Time.Display }}</time>
                    {{- end -}}
                </span>
                {{- end }}
            </div>
            {{- end }}

            {{- if $card.Description }}
            {{- $descriptionTag := default "div" $card.DescriptionTag }}
            {{- if eq $descriptionTag "p" }}
            <p class="{{ $card.DescriptionClass }}"{{ if $card.DescriptionID }} id="{{ $card.DescriptionID }}"{{ end }}>
                {{ $card.Description }}
            </p>
            {{- else }}
            <div class="{{ $card.DescriptionClass }}"{{ if $card.DescriptionID }} id="{{ $card.DescriptionID }}"{{ end }}>
                {{ $card.Description }}
            </div>
            {{- end }}
            {{- end }}

            {{- if $card.Topics }}
            <ul class="{{ $card.TopicsClass }}" aria-label="Included topics">
                {{- range $card.Topics }}
                <li class="{{ $card.TopicItemClass }}">
                    <span class="{{ $card.TopicNameClass }}">{{ .Name }}{{ if .Meta }} <span class="{{ $card.TopicMetaClass }}">{{ .Meta }}</span>{{ end }}</span>
                </li>
                {{- end }}
            </ul>
            {{- end }}

            {{- if $card.ModalDetails }}
            <script type="application/json" data-course-details>{{ $card.ModalDetails }}</script>
            {{- end }}
        </div>
        <span class="course-card__box-icon" aria-hidden="true">
            <svg fill="currentColor" viewBox="0 0 32 32" role="img" aria-hidden="true">
                <title>box-open</title>
                <path d="M29.742 5.39c-.002-.012-.01-.022-.012-.034-.014-.057-.032-.106-.055-.152l.002.004c-.017-.046-.036-.086-.059-.124l.002.003c-.033-.044-.069-.082-.108-.117l-.001-.001c-.023-.028-.046-.053-.071-.076l-.023-.011c-.044-.027-.095-.05-.149-.067l-.005-.002c-.034-.016-.073-.031-.115-.043l-.005-.001-.028-.01-12.999-2c-.034-.006-.074-.009-.114-.009s-.08.003-.119.009l.004-.001-13.026 2.01c-.054.014-.101.032-.146.054l.004-.002c-.052.018-.096.039-.138.064l.003-.002-.024.011c-.025.023-.047.048-.068.074l-.001.001c-.041.036-.078.075-.11.118l-.001.002c-.02.034-.039.074-.055.115l-.002.005c-.021.042-.039.09-.052.141l-.001.005c-.003.013-.011.023-.013.036l-1 6.75c-.005.033-.008.071-.008.11 0 .361.255.663.595.734l.005.001 1.445.296c-.025.065-.041.14-.044.218l-.002 12.502c0 .36.254.66.592.733l.005.001 12 2.5c.046.01.099.016.153.016s.107-.006.158-.017l-.005.001 11.999-2.5c.344-.073.597-.374.598-.734v-12.5c-.004-.08-.02-.155-.046-.225l.002.005 1.445-.296c.345-.072.6-.373.6-.734 0-.039-.003-.077-.009-.115l.001.004zm-13.742-1.131 8.351 1.285-8.351 1.446-8.351-1.446zm-12.371 2.111 11.295 1.955-2.364 5.319-9.714-1.987zm1.121 7.208 8.1 1.657c.046.01.099.016.153.016.303 0 .564-.181.681-.441l.002-.005 1.564-3.52v16.294l-10.5-2.188zm22.5 11.813-10.5 2.188v-16.294l1.564 3.52c.12.264.382.445.685.445h0c0 0 0 0 0 0 .053 0 .105-.006.155-.017l-.005.001 8.1-1.657zm-7.809-11.746-2.365-5.319 11.295-1.955.783 5.287z"></path>
            </svg>
        </span>
    {{- if $isLink }}
    </a>
    {{- else }}
    </article>
    {{- end }}
{{ end }}
