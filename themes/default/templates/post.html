<article class="post" role="article" data-post-id="{{ .Post.ID }}">
    <div
        class="post-progress"
        data-post-progress
        role="progressbar"
        aria-label="Reading progress"
        aria-valuemin="0"
        aria-valuemax="100"
        aria-valuenow="0"
        hidden
    >
        <div class="post-progress__bar" data-post-progress-bar></div>
    </div>
    <div class="post__layout">
        <header class="post__header">
            {{ if .Post.FeaturedImg }}
            <figure class="post__image-wrapper">
                <img
                    src="{{ .Post.FeaturedImg }}"
                    alt="{{ .Post.Title }}"
                    class="post__image"
                    loading="lazy"
                />
            </figure>
            {{ end }}

            <h1 class="post__title">{{ .Post.Title }}</h1>

            {{ if .Post.Description }}
            <p class="post__description">{{ .Post.Description }}</p>
            {{ end }}

            {{ $publishedAt := or .Post.PublishedAt (or .Post.PublishAt .Post.CreatedAt) }}
            <div class="post__meta" aria-label="Post metadata">
                {{ if $publishedAt }}
                <span class="post__meta-item post__meta-item--date">
                    üìÖ {{ $publishedAt.Format "02 January 2006" }}
                </span>
                {{ end }}
                <span class="post__meta-item post__meta-item--author"
                    >‚úçÔ∏è {{ .Post.Author.Username }}</span
                >
                <span class="post__meta-item post__meta-item--views"
                    >üëÅ {{ .Post.Views }} views</span
                >
                {{ if .Post.Category.Name }}
                <span class="post__meta-item post__meta-item--category"
                    >üìÅ {{ .Post.Category.Name }}</span
                >
                {{ end }}
            </div>

            {{ if .Post.Tags }}
            <ul class="tag-list" aria-label="Tags">
                {{ range .Post.Tags }}
                <li class="tag-list__item">
                    <a href="/tag/{{ .Slug }}" class="tag-list__link">#{{ .Name }}</a>
                </li>
                {{ end }}
            </ul>
            {{ end }}
        </header>

        <aside class="post__sidebar">
            {{ if .TOC }}
            {{ .TOC }}
            {{ end }}
            {{ $ads := $.Advertising }}
            {{ if and $ads ( $ads.Enabled ) }}
            {{ range index $ads.Placements "post_sidebar" }}
            {{ . }}
            {{ end }}
            {{ end }}
            {{ template "components/post-share" . }}
        </aside>

        <section class="post__content">
            {{ $ads := $.Advertising }}
            {{ if and $ads ( $ads.Enabled ) }}
            {{ range index $ads.Placements "post_content_top" }}
            {{ . }}
            {{ end }}
            {{ end }}
            {{ .Content }}
            {{ if and $ads ( $ads.Enabled ) }}
            {{ range index $ads.Placements "post_content_bottom" }}
            {{ . }}
            {{ end }}
            {{ end }}
        </section>
    </div>

    {{ template "components/comments" . }}
</article>

{{ template "components/post-related" . }}
