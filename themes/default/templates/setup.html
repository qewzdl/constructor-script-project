<section
    class="setup"
    role="region"
    aria-labelledby="setup-title"
    data-page="setup"
>
    <section class="setup__container" aria-labelledby="setup-title">
        <header class="setup__header">
            <div>
                <h1 id="setup-title" class="setup__title">Initial site setup</h1>
                <p class="setup__subtitle" id="setup-subtitle">
                    Create the first administrator account and customize how
                    your site appears to visitors.
                </p>
            </div>
            <div class="header__logo">
                <img
                    src="/static/icons/logo.svg"
                    alt="Constructor Script Logo"
                    class="header__logo-image"
                />
            </div>
        </header>

        <!-- Progress indicator -->
        <div class="setup__progress" id="setup-progress">
            <div class="progress-step" data-step="site_info">
                <div class="progress-step__number">1</div>
                <div class="progress-step__label">Site Info</div>
            </div>
            <div class="progress-step" data-step="admin">
                <div class="progress-step__number">2</div>
                <div class="progress-step__label">Admin Account</div>
            </div>
            <div class="progress-step" data-step="languages">
                <div class="progress-step__number">3</div>
                <div class="progress-step__label">Languages</div>
            </div>
        </div>

        <div class="setup__alert" id="setup-alert" role="alert" hidden></div>

        <form
            id="setup-form"
            class="setup__form"
            novalidate
            data-action="{{ .SetupAction }}"
            data-status="{{ .SetupStatus }}"
        >
            <!-- Step 1: Site Info -->
            <div class="setup-step" id="step-site_info" data-step="site_info">
                <fieldset class="form-fieldset">
                    <legend class="form-legend">Site Information</legend>

                    <div class="form-field">
                        <label class="form-field__label" for="setup-site-name"
                            >Site name</label
                        >
                        <input
                            id="setup-site-name"
                            name="site_name"
                            type="text"
                            class="form-field__input"
                            placeholder="My awesome blog"
                            required
                        />
                    </div>

                    <div class="form-field">
                        <label
                            class="form-field__label"
                            for="setup-site-description"
                            >Tagline</label
                        >
                        <textarea
                            id="setup-site-description"
                            name="site_description"
                            class="form-field__input"
                            rows="2"
                            placeholder="A modern blog built with Go"
                        ></textarea>
                    </div>

                    <div class="form-field">
                        <label class="form-field__label" for="setup-site-url"
                            >Site URL</label
                        >
                        <input
                            id="setup-site-url"
                            name="site_url"
                            type="url"
                            class="form-field__input"
                            placeholder="https://example.com"
                            required
                        />
                    </div>

                    <div class="form-field">
                        <label class="form-field__label" for="setup-site-favicon"
                            >Favicon URL</label
                        >
                        <input
                            id="setup-site-favicon"
                            name="site_favicon"
                            type="text"
                            class="form-field__input"
                            placeholder="/favicon.ico"
                        />
                    </div>

                    <div class="form-field">
                        <label class="form-field__label" for="setup-site-logo"
                            >Logo URL</label
                        >
                        <input
                            id="setup-site-logo"
                            name="site_logo"
                            type="text"
                            class="form-field__input"
                            placeholder="/static/icons/logo.svg"
                        />
                    </div>
                </fieldset>
            </div>

            <!-- Step 2: Admin Account -->
            <div class="setup-step" id="step-admin" data-step="admin" hidden>
                <fieldset class="form-fieldset">
                    <legend class="form-legend">Administrator Account</legend>

                    <div class="form-field">
                        <label class="form-field__label" for="setup-admin-username"
                            >Username</label
                        >
                        <input
                            id="setup-admin-username"
                            name="admin_username"
                            type="text"
                            class="form-field__input"
                            placeholder="Admin username"
                            autocomplete="username"
                            required
                        />
                    </div>

                    <div class="form-field">
                        <label class="form-field__label" for="setup-admin-email"
                            >Email</label
                        >
                        <input
                            id="setup-admin-email"
                            name="admin_email"
                            type="email"
                            class="form-field__input"
                            placeholder="admin@example.com"
                            autocomplete="email"
                            required
                        />
                    </div>

                    <div class="form-field">
                        <label class="form-field__label" for="setup-admin-password"
                            >Password</label
                        >
                        <input
                            id="setup-admin-password"
                            name="admin_password"
                            type="password"
                            class="form-field__input"
                            placeholder="Create a strong password"
                            autocomplete="new-password"
                            minlength="8"
                            required
                        />
                        <small class="form-helper">
                            Must be at least 8 characters
                        </small>
                    </div>
                </fieldset>
            </div>

            <!-- Step 3: Languages -->
            <div class="setup-step" id="step-languages" data-step="languages" hidden>
                <fieldset class="form-fieldset">
                    <legend class="form-legend">Language Settings</legend>

                    <div class="form-field">
                        <label
                            class="form-field__label"
                            for="setup-site-default-language"
                            >Default language</label
                        >
                        <input
                            id="setup-site-default-language"
                            name="site_default_language"
                            type="text"
                            class="form-field__input"
                            placeholder="en"
                            required
                        />
                        <small class="form-helper">
                            Provide a language code using the BCP&nbsp;47 format
                            (for example <code>en</code> or <code>en-GB</code>).
                        </small>
                    </div>

                    <div class="form-field">
                        <label
                            class="form-field__label"
                            for="setup-site-supported-languages"
                            >Supported languages</label
                        >
                        <input
                            id="setup-site-supported-languages"
                            name="site_supported_languages"
                            type="text"
                            class="form-field__input"
                            placeholder="en, en-GB, fr"
                        />
                        <small class="form-helper">
                            Optional comma-separated list of additional language
                            codes. The default language is always available.
                        </small>
                    </div>
                </fieldset>
            </div>

            <div class="setup__navigation">
                <button type="button" class="button button--secondary" id="prev-button" hidden>
                    Previous
                </button>
                <button type="button" class="button button--primary" id="next-button">
                    Next
                </button>
                <button type="submit" class="button button--primary" id="complete-button" hidden>
                    Complete Setup
                </button>
            </div>

            <p class="form-helper" id="setup-helper">
                After completing setup you'll be redirected to the sign-in page
                to access the admin dashboard.
            </p>
        </form>
    </section>
</section>

<script src="{{ asset "/static/js/setup-config.js" }}"></script>
<script src="{{ asset "/static/js/setup.js" }}" defer></script>
