{{- define "archive-tree-list" -}}
<ul class="archive-tree__list">
    {{- range . }}
    {{- $dirName := trim (default "" .Name) -}}
    {{- $dirPath := trim (default "" .Path) -}}
    <li class="archive-tree__item">
        <article class="archive-tree__entry">
            <a class="archive-tree__entry-link" href="{{ if $dirPath }}/archive/{{ $dirPath }}{{ else }}#{{ end }}">
                <svg class="entry-link__icon" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><g stroke-width="0"></g><g stroke-linecap="round" stroke-linejoin="round"></g><g><title>ionicons-v5-n</title><path d="M64,192V120a40,40,0,0,1,40-40h75.89a40,40,0,0,1,22.19,6.72l27.84,18.56A40,40,0,0,0,252.11,112H408a40,40,0,0,1,40,40v40" style="fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"></path><path d="M479.9,226.55,463.68,392a40,40,0,0,1-39.93,40H88.25a40,40,0,0,1-39.93-40L32.1,226.55A32,32,0,0,1,64,192h384.1A32,32,0,0,1,479.9,226.55Z" style="fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"></path></g></svg>
                {{- if $dirName -}}
                {{ $dirName }}
                {{- else if $dirPath -}}
                {{ $dirPath }}
                {{- else -}}
                Untitled directory
                {{- end -}}
            </a>
        </article>
        {{- if .Children }}
        {{- template "archive-tree-list" .Children -}}
        {{- end }}
    </li>
    {{- end }}
</ul>
{{- end -}}

{{- $pageTitle := default "Resource archive" .Title -}}
{{- $pageDescription := trim (default "Browse shared documents and downloadable files from a single archive." .Description) -}}

<section class="archive" data-archive="overview">
    <div class="archive__container">
        <header class="archive__header">
            <h1 class="archive__title">{{ $pageTitle }}</h1>
            <p class="archive__description">{{ $pageDescription }}</p>
        </header>
        <div class="archive__body">
            <section class="archive-tree" aria-labelledby="archive-tree-title">
                <div>
                    <h2 id="archive-tree-title" class="archive-tree__title">Browse available resources</h2>
                    <p class="archive-tree__hint">
                        Explore the directory structure to locate handbooks, documents, and media shared with the community.
                    </p>
                </div>
                {{- if .Directories }}
                {{- template "archive-tree-list" .Directories -}}
                {{- else }}
                <p class="archive-tree__empty">The archive is currently empty. Check back soon for new resources.</p>
                {{- end }}
            </section>
        </div>
    </div>
</section>
