<section class="tag-page" aria-labelledby="tag-title">
    <header class="tag-page__header">
        <h1 id="tag-title" class="tag-page__title">Posts tagged #{{ .Tag.Name }}</h1>
        <p class="tag-page__description">
            Explore articles related to <strong>{{ .Tag.Name }}</strong>. {{ if eq .Total 1 }}We found one post.{{ else if gt .Total 1 }}We found {{ .Total }} posts.{{ else }}No posts have been published with this tag yet.{{ end }}
        </p>
    </header>

    {{ with .Tags }}
    {{ $active := $.Tag.Slug }}
    <nav class="blog__tags tag-page__tags" aria-label="Browse tags">
        <ul class="tag-list">
            {{ range . }}
            {{ $isActive := eq .Slug $active }}
            <li class="tag-list__item">
                <a
                    href="/tag/{{ .Slug }}"
                    class="tag-list__link{{ if $isActive }} tag-list__link--active{{ end }}"
                    {{ if $isActive }}aria-current="page"{{ end }}
                >
                    #{{ .Name }}
                </a>
            </li>
            {{ end }}
        </ul>
    </nav>
    {{ end }}

    <div class="blog__posts">
        {{ if .Posts }}
        {{ range .Posts }}
        <article class="blog__post post-card">
            {{ if .FeaturedImg }}
            <img src="{{ .FeaturedImg }}" alt="{{ .Title }}" class="post-card__image">
            {{ end }}
            <div class="post-card__content">
                <h2 class="post-card__title">
                    <a href="/blog/post/{{ .Slug }}" class="post-card__link">{{ .Title }}</a>
                </h2>
                {{ if .Description }}
                <p class="post-card__description">{{ .Description }}</p>
                {{ else if .Excerpt }}
                <p class="post-card__description">{{ .Excerpt }}</p>
                {{ end }}
                <div class="post-card__meta">
                    <time class="post-card__date" datetime="{{ .CreatedAt.Format "2006-01-02" }}">
                        {{ .CreatedAt.Format "02 Jan 2006" }}
                    </time>
                    <span class="post-card__views">üëÅ {{ .Views }} views</span>
                </div>
                {{ if .Tags }}
                <ul class="post-card__tags" aria-label="Tags">
                    {{ range .Tags }}
                    <li class="post-card__tag">
                        <a href="/tag/{{ .Slug }}" class="post-card__tag-link">#{{ .Name }}</a>
                    </li>
                    {{ end }}
                </ul>
                {{ end }}
            </div>
        </article>
        {{ end }}
        {{ else }}
        <p class="blog__empty">No articles match this tag yet. Try another tag or check back later.</p>
        {{ end }}
    </div>

    {{ with .Pagination }}
        {{ template "components/pagination" . }}
    {{ end }}
</section>